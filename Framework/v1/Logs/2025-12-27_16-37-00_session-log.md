# Session Log: 2025-12-27 (Session 8)

## Overview

This session added the RoastingStick asset, updated the Scoreboard UI to support split labels, and resolved a Rojo sync troubleshooting issue. Various .rbxm files were updated for visual positioning in Studio.

---

## 1. RoastingStick Asset

### Concept

RoastingStick is a Tool that players hold to roast marshmallows:
- Auto-equipped when player spawns
- Watches player's Backpack for marshmallows
- Automatically mounts marshmallow to stick tip when detected
- Re-issued after each round reset

### Filesystem Structure

```
src/Assets/RoastingStick/
├── init.meta.json              # className: "Model"
└── ServerScriptService/
    └── Script.server.lua       # Auto-equip + mount logic

src/Templates/RoastingStick/
├── init.meta.json              # className: "Tool"
└── Handle.rbxm                 # Part (created in Studio) - PENDING
```

### Server Script Features

**Auto-Equip on Spawn**
```lua
local function giveStick(player)
    local stick = stickTemplate:Clone()
    stick.Parent = player.Backpack
    local humanoid = character:FindFirstChild("Humanoid")
    humanoid:EquipTool(stick)
end
```

**Backpack Watching**
```lua
local function watchBackpack(player)
    local backpack = player:WaitForChild("Backpack")
    backpack.ChildAdded:Connect(function(child)
        if child.Name == "Marshmallow" and child:IsA("Tool") then
            task.wait(0.1)
            mountMarshmallow(player, child)
        end
    end)
end
```

**Marshmallow Mounting**
- Positions marshmallow at stick tip using Handle sizes
- Creates WeldConstraint to attach marshmallow to stick
- Reparents marshmallow from Backpack to stick (removes from inventory)

**Round Reset Integration**
```lua
-- Listen for round reset to re-give sticks
local timerExpired = ReplicatedStorage:WaitForChild("GlobalTimer.TimerExpired")
timerExpired.Event:Connect(function()
    task.wait(3.5)  -- After Orchestrator's reset delay
    for _, player in ipairs(Players:GetPlayers()) do
        giveStick(player)
    end
end)
```

### Pending: Handle.rbxm

The RoastingStick template requires a `Handle.rbxm` Part created in Studio:
1. Create a Part in Studio (cylinder or thin rectangle for stick shape)
2. Name it "Handle"
3. Export as Handle.rbxm to `src/Templates/RoastingStick/`

---

## 2. Scoreboard UI Update

### Split Labels

Changed Scoreboard HUD from single combined label to two separate TextLabels:

**Before:**
```
ScoreLabel: "Score: 150"  (one TextLabel)
```

**After:**
```
ScoreLabel: "Score: "     (static text, can be styled differently)
ScoreValue: "150"         (just the number)
```

### LocalScript Update

```lua
-- Find UI elements
local scoreValue = screenGui:FindFirstChild("ScoreValue", true)

-- Update display - just the number
local function updateDisplay(data)
    if scoreValue then
        local displayScore = roundToNearest5(math.floor(data.totalScore))
        scoreValue.Text = tostring(displayScore)
    end
end

-- Initialize with just "0"
if scoreValue then
    scoreValue.Text = "0"
end
```

---

## 3. Troubleshooting: Rojo Sync Issues

### Symptom
Changes to LocalScript weren't appearing in-game despite file saves.

### Cause
Rojo plugin wasn't syncing changes (stale connection).

### Solution
Disconnect and reconnect the Rojo plugin in Studio.

### Key Lesson
If Rojo changes aren't appearing in-game, disconnect and reconnect the Rojo plugin before deeper debugging.

---

## 4. Files Changed

### New Files

```
src/Assets/RoastingStick/
├── init.meta.json
└── ServerScriptService/
    └── Script.server.lua

src/Templates/RoastingStick/
└── init.meta.json
```

### Modified Files

- `src/Assets/Scoreboard/StarterGui/LocalScript.client.lua` - Look for ScoreValue, set number only
- `src/Assets/Scoreboard/StarterGui/ScreenGui.rbxm` - Split into ScoreLabel + ScoreValue
- Various `.rbxm` files updated for positioning in Studio:
  - `src/Assets/Dispenser/Anchor.rbxm`
  - `src/Assets/GlobalTimer/StarterGui/ScreenGui.rbxm`
  - `src/Assets/LeaderBoard/Billboard.rbxm`
  - `src/Assets/TimedEvaluator/Anchor.rbxm`
  - `src/Assets/ZoneController/Zone.rbxm`

---

## 5. Current Asset List

| Asset | Purpose |
|-------|---------|
| Dispenser | Gives marshmallows, fires Empty event |
| ZoneController | Cooks marshmallows in zone |
| TimedEvaluator | Scores accuracy vs target |
| Scoreboard | Calculates points, HUD display |
| GlobalTimer | Round countdown, HUD display |
| Orchestrator | Event coordinator, resets assets |
| LeaderBoard | Persistent top 10 high scores |
| RoastingStick | Auto-equipped tool, mounts marshmallows |

---

## 6. Event Flow (Updated)

```
Player Spawns:
RoastingStick → gives + equips stick

Player Gets Marshmallow:
Dispenser → Backpack.ChildAdded → RoastingStick mounts marshmallow

Marshmallow Cooked:
ZoneController → Player submits → TimedEvaluator → Scoreboard → RoundComplete
                                                                    │
                                                    ┌───────────────┼───────────────┐
                                                    ↓               ↓               ↓
                                            Orchestrator    LeaderBoard      RoastingStick
                                          (reset evaluator)   (tracks)     (detect next marshmallow)

Round End:
GlobalTimer.TimerExpired  ─┬→ LeaderBoard (posts scores)
Dispenser.Empty          ─┘→ Orchestrator (full reset) → RoastingStick (re-equip)
```

---

## 7. Next Steps

1. Create Handle.rbxm for RoastingStick template
2. Style GUI elements (positioning, fonts, colors)
3. Visual feedback for marshmallow cooking (color change)
4. Test full RoastingStick flow (mount, cook, score)
5. End-of-round summary screen
